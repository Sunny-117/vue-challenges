var nt=Object.defineProperty,ot=Object.defineProperties;var st=Object.getOwnPropertyDescriptors;var Ce=Object.getOwnPropertySymbols;var rt=Object.prototype.hasOwnProperty,at=Object.prototype.propertyIsEnumerable;var be=(e,t,o)=>t in e?nt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,N=(e,t)=>{for(var o in t||(t={}))rt.call(t,o)&&be(e,o,t[o]);if(Ce)for(var o of Ce(t))at.call(t,o)&&be(e,o,t[o]);return e},Ee=(e,t)=>ot(e,st(t));import{r as Ie,a as h,o as u,c as C,w as q,b as M,v as it,d as r,e as _,u as g,t as b,T as lt,f as Ue,g as ct,h as ut,i as dt,j as pt,k as mt,l as gt,m as vt,n as _t,p as x,q as ke,s as Q,x as D,y as O,z as $,A as ee,B as te,C as G,D as j,F as B,K as ft,E as Y,G as At,H as ne,I as Le,J as f,L as oe,M as J,N as se,O as re,P as we,Q as V,R as ht,S as yt,U as Ct,V as xe,W as X,X as bt,Y as Et,Z as ae,_ as ie,$ as le}from"./vendor.7379f245.js";const It=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function o(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerpolicy&&(l.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?l.credentials="include":s.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(s){if(s.ep)return;s.ep=!0;const l=o(s);fetch(s.href,l)}};It();const Ut={class:"message_container"},kt={class:"icon","aria-hidden":"true"},Lt=["xlink:href"],wt={class:"text"},xt={props:{type:{type:String,default:"success"},text:{type:String,default:""},afterRemoveFun:{type:Function,default:()=>{}}},setup(e){const t=e,o=Ie({success:"#icon-chenggong",warning:"#icon-jinggao",error:"#icon-cuowu"}),n=h(!0);return setTimeout(()=>{n.value=!1,t.afterRemoveFun()},2e3),(s,l)=>(u(),C(lt,{name:"slide-fade"},{default:q(()=>[M(r("div",Ut,[(u(),_("svg",kt,[r("use",{"xlink:href":g(o)[e.type]},null,8,Lt)])),r("span",wt,b(e.text),1)],512),[[it,n.value]])]),_:1}))}},ce=(e,t)=>{let o=document.createElement("div"),n=document.createAttribute("class");n.value="message_box",o.setAttributeNode(n);const s=60,l=document.querySelectorAll(".message_box");o.style.top=`${l.length*s}px`;const a=()=>{for(let d=0;d<l.length;d++)l[d].style.top=`${d*s}px`},p=Ue(xt,{type:e,text:t,afterRemoveFun:()=>{p.unmount(o),document.body.removeChild(o),a()}});return p.vm=p.mount(o),document.body.appendChild(o),p};var U={success(e=""){return ce("success",e)},warning(e=""){return ce("warning",e)},error(e=""){return ce("error",e)}};const Pe="production",Pt={dev:{baseApi:"/api",mockApi:"https://www.fastmock.site/mock/c213efb03a5cad1915f73f29ba1080b0/api"},prod:{baseApi:"/api",mockApi:"https://www.fastmock.site/mock/c213efb03a5cad1915f73f29ba1080b0/api"}};var F=N({env:Pe,mock:!1,namespace:"selfDesign"},Pt[Pe]);const St="modulepreload",Se={},Tt="/",K=function(t,o){return!o||o.length===0?t():Promise.all(o.map(n=>{if(n=`${Tt}${n}`,n in Se)return;Se[n]=!0;const s=n.endsWith(".css"),l=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${l}`))return;const a=document.createElement("link");if(a.rel=s?"stylesheet":St,s||(a.as="script",a.crossOrigin=""),a.href=n,document.head.appendChild(a),s)return new Promise((i,p)=>{a.addEventListener("load",i),a.addEventListener("error",p)})})).then(()=>t())},Rt=[{path:"/",redirect:"/tutorial"},{name:"tutorial",path:"/tutorial",meta:{id:0},component:()=>K(()=>import("./NoviceTutorial.7fa8cb85.js"),["assets/NoviceTutorial.7fa8cb85.js","assets/NoviceTutorial.b93c1077.css","assets/vendor.7379f245.js"])},{name:"project",path:"/project",meta:{id:1},component:()=>K(()=>import("./ProjectManagement.a7fa4ff8.js"),["assets/ProjectManagement.a7fa4ff8.js","assets/ProjectManagement.f6a491ee.css","assets/vendor.7379f245.js","assets/404.c342ac66.js","assets/el-input.a608d6e0.js","assets/el-input.0abc070b.css"])},{name:"template",path:"/template",meta:{id:2},component:()=>K(()=>import("./RelatedTemplate.40c025ef.js"),["assets/RelatedTemplate.40c025ef.js","assets/RelatedTemplate.0adb94e2.css","assets/vendor.7379f245.js"])},{name:"NotFound",path:"/:pathMatch(.*)*",component:()=>K(()=>import("./NotFound.7cf3c28e.js"),["assets/NotFound.7cf3c28e.js","assets/NotFound.da8f129c.css","assets/404.c342ac66.js","assets/vendor.7379f245.js"])},{name:"ProjectEdit",path:"/projectEdit/:id",meta:{isEdit:!0},component:()=>K(()=>import("./ProjectEdit.0630be57.js"),["assets/ProjectEdit.0630be57.js","assets/ProjectEdit.a35c7d01.css","assets/el-input.a608d6e0.js","assets/el-input.0abc070b.css","assets/vendor.7379f245.js"])}],ue=ct({history:ut(),routes:Rt});ue.beforeEach((e,t,o)=>{e.name==="ProjectEdit"&&!localStorage.getItem("token")?o({name:"project"}):o()});function P(e){if(Array.isArray(e)){const t=[];return e.forEach(o=>{t.push(P(o))}),t}else if(e&&typeof e=="object"){const t={};for(let o in e)t[o]=P(e[o]);return t}else return e}function Te(e,t){const o=e.components.get(t).children;e.components.delete(t),o.forEach(n=>{Te(e,n.id)})}function Re(e,{parentId:t,targetId:o}){const n=e.components.get(t).children;let s=0;for(;s<n.length&&n[s].id!==o;s++);return n.splice(s,1)[0]}let W=-1;function je(e,t){let o=-1;return e.id?(o=e.id,W=o>W?o:W):(W+=1,o=W),{id:o,parentId:t,tag:e.tag,style:e.style?P(e.style):{},values:e.values?P(e.values):{},event:e.event?P(e.event):[],tempStyle:{},children:[]}}function de(e){e.activeComponentId!==-1&&(e.components.get(e.activeComponentId).tempStyle={},e.activeComponentId=-1)}function Me(e,{node:t,parentId:o=1}){const n=je(t,o);e.components.set(n.id,n),o!==0&&e.components.get(o).children.push(n),t.children&&t.children.forEach(s=>Me(e,{node:s,parentId:n.id}))}function Ne(e,{node:t,parentId:o=1}){const n=je(t,o);e.components.set(n.id,n),o!==0&&e.components.get(o).children.push(n),t.children&&t.children.forEach(s=>Ne(e,{node:s,parentId:n.id}))}function De(e){const t={id:e.id,tag:e.tag,style:P(e.style),values:P(e.values),event:P(e.event)};return e.children&&(t.children=[],e.children.forEach(o=>t.children.push(De(o)))),t}var jt={namespaced:!0,state:{components:new Map,activeComponentId:-1,activeContainerId:-1,fileContent:{},slimComponents:null},getters:{activeComponent(e){if(e.activeComponentId===-1)return null;const t=e.components.get(e.activeComponentId);return Object.assign({},t,{parentTag:e.components.get(t.parentId).tag})},componnetsId(e){return Array.from(e.components.keys()).filter(t=>t!==1&&t!==e.activeComponentId)}},mutations:{initComponents:Ne,addComponent:Me,deleteComponent(e){const t=e.activeComponentId;if(t===-1)return;const o=e.components.get(t).parentId;de(e),Te(e,t),Re(e,{parentId:o,targetId:t})},moveComponent(e,{to:t,from:o,targetId:n,position:s}){if(t!==-1&&(e.components.get(t).tag==="PositionLayout"?(e.components.get(n).style.left=s.left+"px",e.components.get(n).style.top=s.top+"px"):(delete e.components.get(n).style.left,delete e.components.get(n).style.top),t!==o)){const l=Re(e,{parentId:o,targetId:n});l.parentId=t,e.components.get(t).children.push(l)}},setActiveComponent(e,t){t===-1||t===1||(de(e),e.activeComponentId=t,e.components.get(t).tempStyle["z-index"]=1e3)},resetActiveComponent:de,setActiveComponentStyle(e,t){if(e.activeComponentId===-1)return;const o=e.components.get(e.activeComponentId).style;for(let n in t)o[n]=t[n]},setActiveComponentTempStyle(e,t){if(e.activeComponentId===-1)return;const o=e.components.get(e.activeComponentId).tempStyle;for(let n in t)o[n]=t[n]},clearActiveComponentTempStyle(e,t){t!==-1&&(e.components.get(t).tempStyle={})},setActiveContainer(e,t){e.activeContainerId=t},resetActiveContainer(e){e.activeContainerId=-1},setActiveComponentValues(e,t){if(e.activeComponentId===-1)return;const o=e.components.get(e.activeComponentId).values;for(let n in t)o[n]=t[n]},setActiveComponentEvents(e,{event:t}){e.activeComponentId!==-1&&Array.isArray(t)&&(e.components.get(e.activeComponentId).event=P(t))},clearAllStates(e){e.components=new Map,e.activeComponentId=-1,e.activeContainerId=-1,e.fileContent={},e.slimComponents=null},slimComponents(e){if(e.components.size===0)return!1;e.fileContent.root=De(e.components.get(1))},setActiveComponentSize(e,{widthInPx:t,heightInPx:o}){const n=e.activeComponentId;e.components.get(n).style.width=t,e.components.get(n).style.height=o},setFileContent(e,t){for(let o in t)o!=="root"&&(e.fileContent[o]=t[o])}}};const Mt=e=>{if(pt(e)){const t=mt(e.get(1));return new Map([[1,t]])}},pe="replaceEditPage",Nt=({state:e,dispatch:t,commit:o})=>{const n=e;if(n.i<=0)return;const s=n.history[n.i-1];t(pe,{editPage:s},{root:!0}),o("updateI",n.i-1)},Dt=({state:e,dispatch:t,commit:o})=>{const n=e;if(n.i>=n.history.length-1)return;const s=n.history[n.i+1];t(pe,{editPage:s},{root:!0}),o("updateI",n.i+1)},Bt=({commit:e})=>{e("truncateHistory",0)},me=Symbol("isInternal"),k="history",Ft=new Set(["setActiveContainer","resetActiveContainer","setActiveComponentTempStyle","clearActiveComponentTempStyle","setActiveComponent","resetActiveComponent","setActiveComponentSize","clearAllStates","initComponents","setFileContent","slimComponents"]),Ht=e=>!Ft.has(e),Ot=`${k}/addItemToHistory`,Gt=`${k}/truncateHistory`,Vt=`${k}/updateI`,Kt=e=>(o,n)=>{if(n[k][me])return;const s=o.type;if(!s.startsWith("editPage/"))return;const l=s.split("/")[1];if(!Ht(l))return;const a=n.history;a.i!==a.history.length-1&&e.commit(Gt,a.i+1);const i=dt(n.editPage,Mt);e.commit(Ot,i),e.commit(Vt,a.i+1)},Wt=e=>{e.registerModule(k,{namespaced:!0,state:()=>({[me]:!1,history:[],i:-1}),getters:{canRedo:o=>!(o.i>=o.history.length-1),canUndo:o=>!(o.i<=0)},mutations:{setInternalFlag(o,n){o[me]=n},addItemToHistory(o,n){o.history.push(n)},truncateHistory(o,n){o.history.length=n},updateI(o,n){o.i=n}},actions:{undo:Nt,redo:Dt,resetHistory:Bt}});const t=Kt(e);e.subscribe(t)},zt=e=>{e.editPage.components=new Map},qt={__resetEditPageComponentsMap:zt},Qt=({commit:e},{editPage:t})=>{e(Be,!0),e("editPage/resetActiveComponent"),e("editPage/resetActiveContainer");const o=t.components.get(1);e("__resetEditPageComponentsMap"),e("editPage/addComponent",{node:o,parentId:0}),e(Be,!1)},Yt={[pe]:Qt},Jt=`${k}/redo`,Xt=`${k}/undo`,Zt=`${k}/canRedo`,$t=`${k}/canUndo`,Oo=`${k}/resetHistory`,Be=`${k}/setInternalFlag`;var Z=gt({state:{loginFormClose:!1,token:null,username:null},mutations:N({handleLoginFormClose(e){e.loginFormClose=!e.loginFormClose},setToken(e,t){e.token=t},setUsername(e,t){e.username=t},setLoginFormClose(e,t){e.loginFormClose=t}},qt),actions:N({},Yt),modules:{editPage:jt},plugins:[Wt]});const z=vt.create({baseUrl:F.baseApi,timeout:8e3});z.interceptors.request.use(e=>{const t=e.headers,o=localStorage.getItem("token")||"";return["/user/login","/user/register"].includes(e.url)||(t.token=o),e});z.interceptors.response.use(e=>{const{code:t}=e.data;return t===4002&&(Z.commit("setLoginFormClose",!0),Z.commit("setToken",void 0),Z.commit("setUsername",void 0),localStorage.removeItem("token"),ue.push("/project")),e.data});const A=e=>{e.method=e.method||"get",e.method.toLowerCase()==="get"&&(e.params=e.data);let t=F.mock;return typeof e.mock!="undefined"&&(t=e.mock),F.env==="prod"?z.defaults.baseURL=F.baseApi:z.defaults.baseURL=t?F.mockApi:F.baseApi,z(e)};["get","post","put","delete","patch"].forEach(e=>{A[e]=(t,o,n)=>A(N({url:t,data:o,method:e},n))});var S={async login(e){return A({url:"/user/login",method:"POST",data:e})},async register(e){return A({url:"/user/register",method:"POST",data:e})},async getUserProject(){return A({url:"/project/getUserProject",method:"GET"})},async getUserInfo(){return A({url:"/user/getUserInfo",method:"GET"})},async modifyUsername(e){return A({url:"/user/modifyUsername",method:"POST",data:e})},async download(e){return A({url:"/project/export",method:"GET",data:{id:e},responseType:"blob"}).then(t=>{_t(t,e+".json")})},async deleteProject(e){return A({url:"/project/deleteProject",method:"POST",data:e})},async createProject(e){return A({url:"/project/createProject",method:"POST",data:e})},async modifyName(e){return A({url:"/project/modifyName",method:"POST",data:e})},async getProjectContent(e){return A({url:"/project/getProjectContent",method:"GET",data:e})},async release(e){return A({url:"/project/release",method:"POST",data:e})},async modifyContent(e){return A({url:"/project/modifyContent",method:"POST",data:e})},importProject({projectName:e,file:t}){const o=new FormData;return o.append("projectName",e),o.append("file",t),A({url:"/project/import",method:"post",data:o})},uploadImg(e){const t=new FormData;return t.append("file",e),A({url:"/other/uploadImg",method:"POST",data:t})}};var L=(e,t)=>{const o=e.__vccOpts||e;for(const[n,s]of t)o[n]=s;return o};const Fe=e=>(ee("data-v-1d66d61e"),e=e(),te(),e),en={class:"login"},tn=Fe(()=>r("label",{for:"account"},"\u8D26\u53F7",-1)),nn={class:"form_error"},on=Fe(()=>r("label",{for:"password"},"\u5BC6\u7801",-1)),sn=["onKeyup"],rn={class:"form_error"},an={setup(e){const t=x();ke({validationSchema:{account(m){if(!!m)return/^\w{8,20}$/.test(m)?!0:"\u9700\u89818-20\u4F4D\u4EE5\u5185\u7684\u6570\u5B57\u6216\u5B57\u6BCD"},pwd(m){if(!!m)return/^\w{8,20}$/.test(m)?!0:"\u9700\u89818-20\u4F4D\u4EE5\u5185\u7684\u6570\u5B57\u6216\u5B57\u6BCD"}}});const{value:n,errorMessage:s,meta:l}=Q("account"),{value:a,errorMessage:i,meta:p}=Q("pwd"),d=async()=>{if(l.valid&&p.valid){const c=await S.login({account:n.value,pwd:a.value});if(c.code===2e3){U.success(c.message),t.commit("handleLoginFormClose"),t.commit("setToken",c.data.token),localStorage.setItem("token",c.data.token);const{data:v}=await S.getUserInfo();t.commit("setUsername",v.username)}else U.error(c.message)}else U.warning("\u8BF7\u6B63\u786E\u586B\u5199\u4FE1\u606F")};return(m,c)=>(u(),_("div",en,[tn,M(r("input",{type:"text",id:"account",placeholder:"\u8BF7\u8F93\u51658-20\u4F4D\u4EE5\u5185\u7684\u6570\u5B57\u6216\u5B57\u6BCD","onUpdate:modelValue":c[0]||(c[0]=v=>O(n)?n.value=v:null)},null,512),[[D,g(n)]]),r("div",nn,b(g(s)),1),on,M(r("input",{type:"password",id:"password",placeholder:"\u8BF7\u8F93\u51658-20\u4F4D\u4EE5\u5185\u7684\u6570\u5B57\u6216\u5B57\u6BCD","onUpdate:modelValue":c[1]||(c[1]=v=>O(a)?a.value=v:null),onKeyup:$(d,["enter"])},null,40,sn),[[D,g(a)]]),r("div",rn,b(g(i)),1),r("div",{class:"login_form_button",onClick:d}," \u767B\u5F55 ")]))}};var ln=L(an,[["__scopeId","data-v-1d66d61e"]]);const He=e=>(ee("data-v-3a4c2f44"),e=e(),te(),e),cn={class:"logon"},un=He(()=>r("label",{for:"account"},"\u8D26\u53F7",-1)),dn={class:"form_error"},pn=He(()=>r("label",{for:"password"},"\u5BC6\u7801",-1)),mn=["onKeyup"],gn={class:"form_error"},vn={setup(e){const t=x();ke({validationSchema:{account(m){if(!!m)return/^\w{8,20}$/.test(m)?!0:"\u9700\u89818-20\u4F4D\u4EE5\u5185\u7684\u6570\u5B57\u6216\u5B57\u6BCD"},pwd(m){if(!!m)return/^\w{8,20}$/.test(m)?!0:"\u9700\u89818-20\u4F4D\u4EE5\u5185\u7684\u6570\u5B57\u6216\u5B57\u6BCD"}}});const{value:n,errorMessage:s,meta:l}=Q("account"),{value:a,errorMessage:i,meta:p}=Q("pwd"),d=async()=>{if(l.valid&&p.valid){const c=await S.register({account:n.value,pwd:a.value});c.code===2e3?(U.success(c.message),t.commit("handleLoginFormClose")):U.error(c.message)}else U.warning("\u8BF7\u6B63\u786E\u586B\u5199\u4FE1\u606F")};return(m,c)=>(u(),_("div",cn,[un,M(r("input",{type:"text",id:"account",placeholder:"\u8BF7\u8F93\u51658-20\u4F4D\u4EE5\u5185\u7684\u6570\u5B57\u6216\u5B57\u6BCD","onUpdate:modelValue":c[0]||(c[0]=v=>O(n)?n.value=v:null)},null,512),[[D,g(n)]]),r("div",dn,b(g(s)),1),pn,M(r("input",{type:"password",id:"password",placeholder:"\u8BF7\u8F93\u51658-20\u4F4D\u4EE5\u5185\u7684\u6570\u5B57\u6216\u5B57\u6BCD","onUpdate:modelValue":c[1]||(c[1]=v=>O(a)?a.value=v:null),onKeyup:$(d,["enter"])},null,40,mn),[[D,g(a)]]),r("div",gn,b(g(i)),1),r("div",{class:"logon_form_button",onClick:d}," \u6CE8\u518C ")]))}};var _n=L(vn,[["__scopeId","data-v-3a4c2f44"]]);const fn={class:"login_form"},An={class:"tab_change"},hn=["onClick"],yn={setup(e){const t=x(),o=[{id:0,name:ln,zh:"\u767B\u5F55"},{id:1,name:_n,zh:"\u6CE8\u518C"}],n=h(0),s=()=>t.commit("handleLoginFormClose");return(l,a)=>(u(),C(At,{to:".main"},[r("div",{class:"mask",onClick:s}),r("div",fn,[r("div",An,[(u(),_(B,null,G(o,i=>r("div",{key:i.id,class:j(["tab_button",{active:n.value===i.id}]),onClick:p=>n.value=i.id},b(i.zh),11,hn)),64))]),(u(),C(ft,null,[(u(),C(Y(o[n.value].name),{key:n.value}))],1024))])]))}};var Cn=L(yn,[["__scopeId","data-v-2a6f6853"]]),bn="/logo.png",En="/img/\u9ED8\u8BA4\u5934\u50CF.png";const In={class:"nav"},Un={class:"nav_left"},kn=["onClick"],Ln=["src","alt"],wn={class:"nav_text"},xn={key:0,class:"nav_right"},Pn=r("div",{class:"avatar"},[r("img",{src:En,alt:"\u9ED8\u8BA4\u5934\u50CF"})],-1),Sn=r("div",null,"\u767B\u5F55",-1),Tn=r("div",null,"|",-1),Rn=r("div",null,"\u6CE8\u518C",-1),jn=[Sn,Tn,Rn],Mn={key:1,class:"nav_right-logined"},Nn={class:"avatar"},Dn={setup(e){const t=x(),o=ne(),n=Le(),s=Ie([{id:0,text:"\u65B0\u624B\u6559\u7A0B",img:"/img/\u65B0\u624B\u6559\u7A0B.png",path:"/tutorial"},{id:1,text:"\u9879\u76EE\u7BA1\u7406",img:"/img/\u9879\u76EE\u7BA1\u7406.png",path:"/project"},{id:2,text:"\u76F8\u5173\u6A21\u677F",img:"/img/\u76F8\u5173\u6A21\u677F.png",path:"/template"}]),l=E=>o.push(E.path),a=()=>t.commit("handleLoginFormClose"),i=f(()=>{var E;return(E=t.state.username)==null?void 0:E.slice(0,2)}),p=h(!1),d=h(null),m=f({get:()=>t.state.username,set:E=>d.value=E}),c=()=>p.value=!p.value,v=async()=>{const{code:E,message:R}=await S.modifyUsername({username:d.value});E===2e3?(t.commit("setUsername",d.value),c(),U.success("\u4FEE\u6539\u6210\u529F")):U.error(R)};return(E,R)=>(u(),_("div",In,[r("div",Un,[r("img",{src:bn,alt:"logo",class:"logo",onClick:R[0]||(R[0]=I=>g(o).push("/tutorial"))}),(u(!0),_(B,null,G(g(s),I=>(u(),_("div",{key:I.id,class:"nav_item",onClick:he=>l(I)},[r("img",{src:I.img,alt:I.text,class:"nav_img",style:oe({visibility:I.id===g(n).meta.id?"visible":"hidden"})},null,12,Ln),r("span",wn,b(I.text),1)],8,kn))),128))]),g(t).state.token?(u(),_("div",Mn,[r("div",Nn,b(g(i)),1),r("div",{class:"username",onClick:c,style:oe({display:p.value?"none":"block"})},b(g(t).state.username),5),r("div",{class:"username_edit",style:oe({display:p.value?"flex":"none"})},[M(r("input",{type:"text","onUpdate:modelValue":R[1]||(R[1]=I=>O(m)?m.value=I:null)},null,512),[[D,g(m)]]),r("div",{class:"username_edit_btn",onClick:v}," \u786E\u8BA4 "),r("div",{class:"username_edit_btn",onClick:c}," \u53D6\u6D88 ")],4)])):(u(),_("div",xn,[Pn,r("div",{class:"action",onClick:a},jn)]))]))}};var Bn="/img/EditIcons/\u94FE\u63A5.png";const Fn={name:"DialogBox",props:{dialogVisible:{type:Boolean,default:!1}},emits:["dialogVisible"],setup(e,{emit:t}){let o=h(e.dialogVisible);J(()=>e.dialogVisible,()=>{o.value=e.dialogVisible});const n=se("isPublishBtn"),s=()=>{t("dialogVisible",o.value)};let l=se("onlineUrl");return{btn:n,linkValue:l,dialogDisvisible:o,cancelDialog:s,copyPublishLink:()=>{document.getElementById("online-link").select(),document.execCommand("copy")}}}},Hn={id:"dialog-outsidebox"},On={class:"dialog-box"},Gn=re(" \u9879\u76EE"),Vn={class:"link-box"},Kn=r("img",{src:Bn},null,-1),Wn=["value"];function zn(e,t,o,n,s,l){return u(),_("div",Hn,[r("div",null,[r("div",On,[r("h3",null,[Gn,r("span",{class:j(n.btn?"publishText":"")},b(n.btn?"\u53D1\u5E03":"\u9884\u89C8"),3)]),r("div",Vn,[Kn,r("input",{id:"online-link",type:"text",value:"http://159.75.249.227:8848"+n.linkValue},null,8,Wn)]),r("button",{class:j(n.btn?"publishCopyBtn":"copyBtn"),onClick:t[0]||(t[0]=(...a)=>n.copyPublishLink&&n.copyPublishLink(...a))}," \u590D \xA0 \u5236 ",2),r("button",{class:j(n.btn?"publishCancelBtn":"cancelBtn"),onClick:t[1]||(t[1]=(...a)=>n.cancelDialog&&n.cancelDialog(...a))}," \u53D6 \xA0 \u6D88 ",2)])])])}var Oe=L(Fn,[["render",zn]]);const qn={name:"ProjectEditNav",components:{DialogBox:Oe},setup(){let e=h(!1);const t=y=>{e.value=y},o=x(),n=f(()=>{var y;return(y=o.state.username)==null?void 0:y.slice(0,2)}),s=Le(),l=ne();let a=h(!0),i=h("");const p=()=>{o.commit("editPage/slimComponents");const y=o.state.editPage.fileContent;S.modifyContent({id:s.params.id,content:JSON.stringify(y)}).then(w=>{w.code===2e3&&(l.replace({query:{modifyTime:w.data.modifyTime,name:l.currentRoute.value.query.name}}),i.value=new Date(w.data.modifyTime).toLocaleString().replace(/年|月/g,"-").replace(/日/g," "),a.value=!1)})};let d=h(0);const m=()=>{d.value>5*60&&(d.value=0,p()),d.value++,setTimeout(m,1e3)};m(),J(()=>[l.currentRoute.value.query.modifyTime,i.value],([y])=>{i.value=new Date(Number(y)).toLocaleString().replace(/年|月/g,"-").replace(/日/g," "),a.value=!1},{deep:!1,immediate:!0});let c=h(!0),v=h("");const E=y=>{y?confirm("\u662F\u5426\u786E\u5B9A\u5C06\u672C\u9879\u76EE\u53D1\u5E03\uFF1F")&&(c.value=y,p(),S.release({id:s.params.id,temp:!1}).then(w=>{v.value=w.data.url}),e.value=!e.value):(c.value=y,S.release({id:s.params.id,temp:!0}).then(w=>{v.value=w.data.url}),e.value=!e.value)};we("isPublishBtn",c),we("onlineUrl",v);const R=()=>{},I=()=>{o.dispatch(Xt)},he=()=>{o.dispatch(Jt)},et=f(()=>o.getters[$t]),tt=f(()=>o.getters[Zt]),ye=h(s.query.name);return{userIcon:n,childData:t,dialogVisible:e,saveTime:i,isSaveProject:a,saveProject:p,displaylDialog:E,publishMessage:R,undo:I,redo:he,canRedo:tt,canUndo:et,fileName:ye,changeFileName:async()=>{const{code:y,message:w}=await S.modifyName({id:s.params.id,name:ye.value});y===2e3?U.success(w):U.error(w)}}}},H=e=>(ee("data-v-773c4f18"),e=e(),te(),e),Qn={class:"edit-nav-box"},Yn={class:"edit-nav"},Jn={class:"left-part"},Xn={id:"user-msg"},Zn={id:"user-icon"},$n={id:"to-manage-page"},eo=H(()=>r("i",null,null,-1)),to=H(()=>r("span",null,"\u65B0\u624B\u6559\u7A0B",-1)),no=[eo,to],oo=H(()=>r("i",null,null,-1)),so=H(()=>r("span",null,"\u9879\u76EE\u7BA1\u7406",-1)),ro=[oo,so],ao=H(()=>r("i",null,null,-1)),io=H(()=>r("span",null,"\u76F8\u5173\u6A21\u677F",-1)),lo=[ao,io],co={class:"file-name"},uo={class:"edit-operation"},po=["disabled"],mo=["disabled"],go={key:0,id:"edit-save-time"},vo={class:"right-part"};function _o(e,t,o,n,s,l){const a=Oe;return u(),_(B,null,[r("div",Qn,[r("div",Yn,[r("div",Jn,[r("div",Xn,[r("div",Zn,b(n.userIcon),1),r("ul",$n,[r("li",{onClick:t[0]||(t[0]=i=>e.$router.push("/tutorial"))},no),r("li",{onClick:t[1]||(t[1]=i=>e.$router.push("/project"))},ro),r("li",{onClick:t[2]||(t[2]=i=>e.$router.push("/template"))},lo)])]),r("div",co,[M(r("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=i=>n.fileName=i),onKeyup:t[4]||(t[4]=$((...i)=>n.changeFileName&&n.changeFileName(...i),["enter"]))},null,544),[[D,n.fileName]])]),r("div",uo,[r("button",{id:"undo",onClick:t[5]||(t[5]=(...i)=>n.undo&&n.undo(...i)),disabled:!n.canUndo},null,8,po),r("button",{id:"redo",onClick:t[6]||(t[6]=(...i)=>n.redo&&n.redo(...i)),disabled:!n.canRedo},null,8,mo),r("button",{id:"edit-save",onClick:t[7]||(t[7]=(...i)=>n.saveProject&&n.saveProject(...i))}),n.isSaveProject?V("",!0):(u(),_("p",go,"\u4FDD\u5B58\u4E8E "+b(n.saveTime),1))])]),r("div",vo,[r("button",{id:"preview",onClick:t[8]||(t[8]=i=>n.displaylDialog(!1))},"\u9884\u89C8"),r("button",{id:"publish",onClick:t[9]||(t[9]=i=>n.displaylDialog(!0))},"\u53D1 \xA0 \u5E03")])])]),n.dialogVisible?(u(),C(a,{key:0,onDialogVisible:n.childData},null,8,["onDialogVisible"])):V("",!0)],64)}var fo=L(qn,[["render",_o],["__scopeId","data-v-773c4f18"]]);const Ao={class:"container"},ho={setup(e){const t=x();ht(async()=>{const s=localStorage.getItem("token");if(s){t.commit("setToken",s);const{data:l}=await S.getUserInfo();l?t.commit("setUsername",l.username):(U.error("\u767B\u5F55\u8FC7\u671F\u4E86\uFF0C\u8BF7\u91CD\u65B0\u767B\u5F55"),t.commit("setToken",null),t.commit("handleLoginFormClose"))}}),Date.prototype.format=function(s){var l={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(s)&&(s=s.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in l)new RegExp("("+a+")").test(s)&&(s=s.replace(RegExp.$1,RegExp.$1.length==1?l[a]:("00"+l[a]).substr((""+l[a]).length)));return s};const o=ne();let n=h(!1);return J(()=>o.currentRoute.value.path,s=>{n.value=s.search("projectEdit")==1},{deep:!1,immediate:!1}),(s,l)=>{const a=Ct("router-view");return u(),_("div",Ao,[g(n)?V("",!0):(u(),C(Dn,{key:0})),g(n)?(u(),C(fo,{key:1})):V("",!0),g(t).state.loginFormClose?(u(),C(Cn,{key:2})):V("",!0),yt(a)])}}};const yo={type:"button"},Co={name:"UserButton"},bo=Object.assign(Co,{props:{text:{type:String,default:""}},setup(e){const t=e,o=f(()=>t.text);return(n,s)=>(u(),_("button",yo,[xe(n.$slots,"default",{},()=>[re(b(g(o)),1)],!0)]))}});var Ge=L(bo,[["__scopeId","data-v-94c28786"]]),Eo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAAAXNSR0IArs4c6QAABgtJREFUeF7tnF1oHFUUx8+ZSbaNFkMVkoIWiii2FFJ8sLbFogWLoI2CNXdm05AQraYlNn1QChbU6JMfIBK0IVqbPJndOzFSgh/gR5HWDyL6YEGFClXjQ7Qfmmg3TXZmjtx2t6zrTvbO3t1ssnvndc7/3HN/898792MSBH0pEUAltRaDBqhoAg1QA1QkoCjXDtQAFQkoykM7kHN+vWmaNel2I5HImebm5oRiHUtWXgjA0wCwJqPHNmMsvmQJKBauAWqAigQU5dqBGqAiAUW5dqAGqEhAUa4dqAEqElCU/8eBnPPjAHCHYs7/yT3P64xGo0PiBue8HgD+KnYbJcjnAsA4ER2wLOvzoPwaYB7yRHTSsqwmDVDNok2MsZO5UmgHyoHdyhg7IQNwlWmay+bL6XmeSHRDRsw+0zTH5tNMTk6e6+7u/kfEDAwM1K5cufJBuboXPoqIrkbEt7JalgMoUy7nvKJ3YwJechqgjDnmmSVogBqgLAHFOP0T1gAVCSjKq86BnHNzdna2oba21jIMoxEAplzXHaupqTnFGJsLy7OqAI6MjKz3PO8QIt4OAJnzVx8AvvN9/6Bt2x+EgVhygGGKKWUs53wVER1HxJuC2iGi80S03bbtb2VrqQqAfX19yxobG48h4uZ8YIhoOplMrm5ra5vOF7sg80CZIkodMzw8fKtpml9m/WwDm/U8b3c0Gs1enuWML7kDY7HYJsMwrsto/VPG2ExQ9WKQB4AVALDRMIw/E4nED+3t7RdUIDuOs5uI3gyRY4gx1ikTX3KAnPNjAHBXuhjTNNfs3Lnzl1zFcc5vAYCXAWALAFyCTkS/A0B/IpF4sbOz86JMp7JjOOf7AeDVEFqHMcZk4hcFQOE6InoYEd8IKtr3/U+ISOxUT8h0LDOGc74XAA7J6ojosGVZj8rElx1gCt4RAIgiYu08RRMAnAOAOxlj38t0Lh2TGkY+A4CIpG4fY+w1mdiyAhR7ffX19a8g4l5EFGNf3ouIJgHgEcuy3s8bnArgnK8gohOIuCGfJvUWXt/W1vZbvlhxv2wAe3t7jbVr1/YbhvGYTKFZMXOe522LRqNfyGrF+EpE44h4zTyaWSLaYVnWxyHy5jr0Kup2Vs6XyPDw8EHDMHrz/Gzn68cZAOhijL0r21nHcbb6vj+AiOtyaH4FgAMAMMIY82RzlsWBrutuQcS3ZYsMihMrB0TcwRgTczypS4y5vu+3G4bRQkSNiHjW87yPTNM8whg7L5UkI2jBAfq+vxkR30PEa8MWmyueiC4Q0d22bX8VNp9YofT09MyG1WXGLzhAABCDc+Yhk0r9ae2PACCmbjmPEovRQFCOcgAsVX/+dl33xtbW1rOlaiBX3koCSGK3JZFI3FPoiqUQ8JUE8FL/iWgMER8qZHNUA7xMwPN9/7Bt23sKARJWU3EOTANAxD0tLS0DYYCkJvcbEfE+RBQvutMzMzNDHR0dYo6Y86pYgER0ERHFunlcBuLg4ODyurq65xHxCUQ00hqxG4SI24Pe8BULMAXgDwDYlm/zIRaLrUPEdwJWKGJcnSaidtu2j2Y/jEoHKPor1svNQasMx3HEioTnc6lY9biuu2nXrl2nyj2Rzldr0e/7vn90amqqpaurK5mZPB6PP4WIz8pu9QOAcPRtjLErY2I1OFAwE5/fPs0YeyENMBaL7UfElxBRdo8wLf0QAB5IT5OqBWB6jni/ZVlj8Xj8SUQURwcFXUT0umVZjwtxtQEU3yqKg/XnAOCqguhdnqyLl4rYwPi6qgAWCiyXjoh+TiaTGyKRiPjsOfuvCEq3oVrMTpQ7FxE9g4h9GmCBT4KIzhLRvYZhZE/WtQNlmRLRBCKuzorXAGUBBsRpgBqgIgFFuXagBqhIQFGuHagBKhJQlGsHLhqAjuP0E9GCHPAodrpY8p8YYzcHJQv9TydGR0cbXNf9BgAaAODKWUOxql1EecT3i3PiuxvbtkeLBjC1ZxbxPK/JNM3li6jDxS7Fm5ubm8j3XWFoBxa7yqWeTwNUfIIaoAaoSEBRrh2oASoSUJRrB2qAigQU5dqBGqAiAUX5vxXRkn57fArzAAAAAElFTkSuQmCC",Io="data:image/png;base64,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",Uo="data:image/png;base64,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";const ko={style:{display:"inline-block"}},Lo=["src","alt","width","height"],wo={name:"UserImage"},xo=Object.assign(wo,{props:{alt:{type:String,default:""},src:{type:[String,null],default:null},width:{type:[Number,String,null],default:null},height:{type:[Number,String,null],default:null},onLoad:{type:[Function,null],default:null},onError:{type:[Function,null],default:null}},setup(e){const t=e;X(c=>({"3a186d1c":g(s),"61b66afb":g(l),"04ef6c04":g(Uo)}));const o=120,n=120,s=f(()=>{var c;if(typeof t.width=="number")return`${t.width}`;if(typeof t.width=="string"){let v=+t.width;if(Number.isFinite(v))return v}return(c=t.width)!=null?c:o}),l=f(()=>{var c;if(typeof t.height=="number")return`${t.height}`;if(typeof t.height=="string"){let v=+t.height;if(Number.isFinite(v))return v}return(c=t.height)!=null?c:n}),a=h(!1),i=f(()=>a.value?Io:!t.src||t.src===""?Eo:t.src),p=h(!0),d=c=>{p.value=!1,a.value=!0,t.onError&&t.onError(c)};J(()=>t.src,()=>{a.value=!1,p.value=!0});const m=c=>{p.value=!1,t.onLoad&&t.onLoad(c)};return(c,v)=>(u(),_("div",ko,[r("img",{src:g(i),alt:t.alt,width:g(s),height:g(l),onload:m,onerror:d,class:j({loading:p.value,error:a.value,empty:!t.src})},null,10,Lo)]))}});var Ve=L(xo,[["__scopeId","data-v-986f5abe"]]);const Po={name:"UserText"},So=Object.assign(Po,{props:{value:{type:String,default:""}},setup(e){const t=e,o=f(()=>t.value);return(n,s)=>(u(),_("p",null,[xe(n.$slots,"default",{},()=>[re(b(g(o)),1)],!0)]))}});var Ke=L(So,[["__scopeId","data-v-1a3fb428"]]);const ge=bt({props:{id:{type:Number,required:!0},transformer:{type:Function,default:e=>e}},emits:["click"],setup(e,{emit:t,slots:o}){if(!o.default)return()=>"\u7A7A\u7684";const n=x(),s=f(()=>{var d;return(d=n.state.editPage.components.get(e.id))!=null?d:null}),l=se("__userComponentTransformers",null),a=f(()=>{var d,m;return(m=l==null?void 0:l.get((d=s.value)==null?void 0:d.tag))!=null?m:e.transformer}),i=f(()=>a.value(s.value)),p=d=>m=>{t("click",m),n.commit("editPage/setActiveComponent",e.id),d&&d(m)};return()=>o.default({data:i.value}).map(d=>Et(d.type,Ee(N({},d.props),{onClick:p(d.props&&d.props.onClick)}),d.children))}}),ve=new Map([["Image","UserImage"],["Text","UserText"],["Button","UserButton"],["HorizontalLayout","UserLayoutHorizontal"],["VerticalLayout","UserLayoutVertical"],["PositionLayout","UserLayoutPosition"]]);const _e={name:"UserLayoutVertical",props:{componentId:{type:Number,required:!0},myChildren:{type:Array,default:[]},width:{type:[String,Number,null],default:"200px"},height:{type:[String,Number,null],default:"400px"},justifyContent:{type:String,default:"flex-start"},alignItems:{type:String,default:"center"}},setup(e){const{componentId:t}=ae(e),o=x();return{isActive:f(()=>t.value===o.state.editPage.activeContainerId),componentMap:ve}}},We=()=>{X(e=>({"0fe2bc59":e.justifyContent,"3e60204b":e.alignItems,f93d0492:e.height,"9b052194":e.width}))},ze=_e.setup;_e.setup=ze?(e,t)=>(We(),ze(e,t)):We;const To=_e;function Ro(e,t,o,n,s,l){const a=ge;return u(),_("div",{class:j(["container",{active:n.isActive}])},[(u(!0),_(B,null,G(o.myChildren,i=>(u(),C(a,{key:i.id,id:i.id},{default:q(({data:p})=>[(u(),C(Y(n.componentMap.get(i.tag)),ie({onClick:t[0]||(t[0]=le(()=>{},["stop"]))},p,{id:"component"+i.id,style:[i.style,i.tempStyle,{position:"relative","user-select":"none"}]}),null,16,["id","style"]))]),_:2},1032,["id"]))),128))],2)}var qe=L(To,[["render",Ro],["__scopeId","data-v-3b3ae47e"]]);const fe={name:"UserLayoutHorizontal",props:{componentId:{type:Number,required:!0},myChildren:{type:Array,default:[]},width:{type:[String,Number,null],default:"400px"},height:{type:[String,Number,null],default:"200px"},justifyContent:{type:String,default:"flex-start"},alignItems:{type:String,default:"center"}},setup(e){const{componentId:t}=ae(e),o=x();return{isActive:f(()=>t.value===o.state.editPage.activeContainerId),componentMap:ve}}},Qe=()=>{X(e=>({"26367586":e.justifyContent,dc9d1010:e.alignItems,"1c43b3e4":e.height,"5c953f69":e.width}))},Ye=fe.setup;fe.setup=Ye?(e,t)=>(Qe(),Ye(e,t)):Qe;const jo=fe;function Mo(e,t,o,n,s,l){const a=ge;return u(),_("div",{class:j(["container",{active:n.isActive}])},[(u(!0),_(B,null,G(o.myChildren,i=>(u(),C(a,{key:i.id,id:i.id},{default:q(({data:p})=>[(u(),C(Y(n.componentMap.get(i.tag)),ie({onClick:t[0]||(t[0]=le(()=>{},["stop"]))},p,{id:"component"+i.id,style:[i.style,i.tempStyle,{position:"relative","user-select":"none"}]}),null,16,["id","style"]))]),_:2},1032,["id"]))),128))],2)}var Je=L(jo,[["render",Mo],["__scopeId","data-v-297624cb"]]);const Ae={name:"UserLayoutPosition",props:{componentId:{type:Number,required:!0},myChildren:{type:Array,default:[]},width:{type:[String,Number,null],default:"400px"},height:{type:[String,Number,null],default:"400px"}},setup(e){const{componentId:t}=ae(e),o=x();return{isActive:f(()=>t.value===o.state.editPage.activeContainerId),componentMap:ve}}},Xe=()=>{X(e=>({"43644709":e.height,"6d9998b8":e.width}))},Ze=Ae.setup;Ae.setup=Ze?(e,t)=>(Xe(),Ze(e,t)):Xe;const No=Ae;function Do(e,t,o,n,s,l){const a=ge;return u(),_("div",{class:j(["container positionLayout",{active:n.isActive}])},[(u(!0),_(B,null,G(o.myChildren,i=>(u(),C(a,{key:i.id,id:i.id},{default:q(({data:p})=>[(u(),C(Y(n.componentMap.get(i.tag)),ie({onClick:t[0]||(t[0]=le(()=>{},["stop"]))},p,{id:"component"+i.id,style:[i.style,i.tempStyle,{position:"absolute","user-select":"none"}]}),null,16,["id","style"]))]),_:2},1032,["id"]))),128))],2)}var $e=L(No,[["render",Do],["__scopeId","data-v-76407f02"]]);const T=Ue(ho);T.component(Ge.name,Ge);T.component(Ve.name,Ve);T.component(Ke.name,Ke);T.component(Je.name,Je);T.component(qe.name,qe);T.component($e.name,$e);T.use(ue);T.use(Z);T.mount("#app");export{U as M,Oo as R,L as _,S as a,En as b,ve as c,ge as d};
